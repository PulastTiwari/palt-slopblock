<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Palt | Slopblock</title>
    <style>
      *, *::before, *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: Geist, 'Geist Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        width: 300px;
        min-height: fit-content;
        background-color: #20332C;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%238FA87A' fill-opacity='0.13' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'/%3E%3C/svg%3E");
        background-repeat: repeat;
        color: #E8F2EB;
        padding: 18px 16px 14px;
        -webkit-font-smoothing: antialiased;
      }

      /* ── Enable toggle ────────────────────── */
      .enable-toggle {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        padding: 11px 14px;
        background: rgba(143, 168, 122, 0.09);
        backdrop-filter: blur(14px) saturate(1.5);
        -webkit-backdrop-filter: blur(14px) saturate(1.5);
        border: 1px solid rgba(143, 168, 122, 0.2);
        border-radius: 16px;
        cursor: pointer;
        color: #E8F2EB;
        font-family: inherit;
        outline: none;
        transition: background 180ms ease, border-color 180ms ease;
      }

      .enable-toggle:hover {
        background: rgba(143, 168, 122, 0.15);
        border-color: rgba(143, 168, 122, 0.34);
      }

      .enable-toggle:focus-visible {
        box-shadow: 0 0 0 2px rgba(143, 168, 122, 0.5);
      }

      .enable-toggle-left {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 2px;
      }

      .enable-label {
        font-size: 13px;
        font-weight: 600;
        letter-spacing: 0.01em;
        line-height: 1;
      }

      .enable-state {
        font-size: 10px;
        font-weight: 400;
        color: rgba(232, 242, 235, 0.5);
        letter-spacing: 0.06em;
        text-transform: uppercase;
        line-height: 1;
      }

      .toggle-pill {
        position: relative;
        width: 40px;
        height: 22px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(143, 168, 122, 0.28);
        border-radius: 999px;
        flex-shrink: 0;
        transition: background 180ms ease, border-color 180ms ease;
      }

      .toggle-pill::after {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: rgba(232, 242, 235, 0.45);
        transition: transform 180ms ease, background 180ms ease;
      }

      .enable-toggle[data-enabled='1'] .toggle-pill {
        background: rgba(143, 168, 122, 0.38);
        border-color: rgba(143, 168, 122, 0.65);
      }

      .enable-toggle[data-enabled='1'] .toggle-pill::after {
        transform: translateX(18px);
        background: #E8F2EB;
      }

      /* ── Divider ──────────────────────────── */
      .divider {
        width: 100%;
        height: 0;
        border: none;
        border-top: 1.5px dotted rgba(143, 168, 122, 0.28);
        margin: 15px 0;
      }

      /* ── Filter mode section ──────────────── */
      .section-eyebrow {
        font-size: 9px;
        font-weight: 600;
        letter-spacing: 0.13em;
        text-transform: uppercase;
        color: rgba(232, 242, 235, 0.42);
        margin-bottom: 8px;
        line-height: 1;
      }

      .mode-headline {
        font-size: 18px;
        font-weight: 600;
        letter-spacing: -0.01em;
        color: #E8F2EB;
        line-height: 1.1;
        margin-bottom: 14px;
        min-height: 22px;
      }

      /* ── Glassmorphism slider card ─────────── */
      .slider-card {
        background: rgba(143, 168, 122, 0.07);
        border: 1px solid rgba(143, 168, 122, 0.17);
        border-radius: 16px;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        padding: 14px 14px 10px;
      }

      .slider-track-wrap {
        position: relative;
        height: 22px;
        display: flex;
        align-items: center;
      }

      input[type='range'] {
        -webkit-appearance: none;
        appearance: none;
        position: relative;
        z-index: 2;
        width: 100%;
        height: 22px; /* match thumb height so WebKit centres thumb on track */
        background: transparent;
        cursor: pointer;
        outline: none;
        --fill-pct: 50%;
      }

      /* Webkit track */
      input[type='range']::-webkit-slider-runnable-track {
        height: 4px;
        border-radius: 99px;
        background: linear-gradient(
          to right,
          rgba(143, 168, 122, 0.75) 0%,
          rgba(143, 168, 122, 0.75) var(--fill-pct),
          rgba(143, 168, 122, 0.16) var(--fill-pct),
          rgba(143, 168, 122, 0.16) 100%
        );
      }

      /* Firefox track */
      input[type='range']::-moz-range-track {
        height: 4px;
        border-radius: 99px;
        background: rgba(143, 168, 122, 0.16);
      }

      input[type='range']::-moz-range-progress {
        height: 4px;
        border-radius: 99px;
        background: rgba(143, 168, 122, 0.75);
      }

      /* Thumb */
      input[type='range']::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 22px;
        height: 22px;
        margin-top: calc((4px - 22px) / 2); /* center thumb on 4px track */
        border-radius: 50%;
        background: rgba(232, 242, 235, 0.92);
        border: 1.5px solid rgba(143, 168, 122, 0.55);
        box-shadow:
          0 2px 8px rgba(0, 0, 0, 0.38),
          0 0 0 4px rgba(143, 168, 122, 0.12);
        cursor: pointer;
        transition: box-shadow 150ms ease, transform 130ms ease;
        position: relative;
        z-index: 3;
      }

      input[type='range']::-webkit-slider-thumb:hover {
        box-shadow:
          0 2px 12px rgba(0, 0, 0, 0.42),
          0 0 0 7px rgba(143, 168, 122, 0.2);
        transform: scale(1.08);
      }

      input[type='range']::-moz-range-thumb {
        width: 22px;
        height: 22px;
        border-radius: 50%;
        background: rgba(232, 242, 235, 0.92);
        border: 1.5px solid rgba(143, 168, 122, 0.55);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.38);
        cursor: pointer;
      }

      /* Tick marks */
      .slider-ticks {
        display: flex;
        justify-content: space-between;
        padding: 0 11px;
        margin-top: 5px;
      }

      .tick {
        width: 1.5px;
        height: 4px;
        border-radius: 1px;
        background: rgba(143, 168, 122, 0.22);
        transition: background 180ms ease;
      }

      .tick.active {
        background: rgba(143, 168, 122, 0.7);
      }

      /* Endpoint labels */
      .slider-ends {
        display: flex;
        justify-content: space-between;
        margin-top: 8px;
        padding: 0 1px;
      }

      .slider-ends span {
        font-size: 9px;
        font-weight: 400;
        color: rgba(232, 242, 235, 0.35);
        letter-spacing: 0.03em;
        line-height: 1;
      }

      /* ── Status ───────────────────────────── */
      .status {
        font-size: 10px;
        min-height: 13px;
        color: rgba(143, 168, 122, 0.65);
        margin-top: 11px;
        text-align: center;
        letter-spacing: 0.04em;
      }

      /* ── Refresh note ─────────────────────── */
      .refresh-note {
        margin-top: 10px;
        font-size: 9px;
        font-weight: 400;
        color: rgba(232, 242, 235, 0.28);
        text-align: center;
        letter-spacing: 0.03em;
        line-height: 1.4;
      }
    </style>
  </head>
  <body>

    <!-- Primary control: enable toggle -->
    <button
      class="enable-toggle"
      id="enabledToggle"
      type="button"
      aria-pressed="true"
      data-enabled="1"
    >
      <div class="enable-toggle-left">
        <span class="enable-label">Filtering enabled</span>
        <span class="enable-state" id="enabledState">On</span>
      </div>
      <span class="toggle-pill" aria-hidden="true"></span>
    </button>

    <!-- Dotted separator -->
    <hr class="divider" />

    <!-- Filter mode slider -->
    <div>
      <div class="section-eyebrow">Filter mode</div>
      <div class="mode-headline" id="modeDisplay">Balanced</div>

      <div class="slider-card">
        <div class="slider-track-wrap">
          <input
            type="range"
            id="modeSlider"
            min="0"
            max="4"
            step="1"
            value="2"
            aria-label="Filter mode"
          />
        </div>
        <div class="slider-ticks" aria-hidden="true">
          <div class="tick"></div>
          <div class="tick"></div>
          <div class="tick active"></div>
          <div class="tick"></div>
          <div class="tick"></div>
        </div>
        <div class="slider-ends" aria-hidden="true">
          <span>Very strict</span>
          <span>Very relaxed</span>
        </div>
      </div>
    </div>

    <div class="status" id="statusText" aria-live="polite"></div>
    <p class="refresh-note">Refresh your LinkedIn feed after each change</p>

    <script type="module" src="./popup.ts"></script>
  </body>
</html>
